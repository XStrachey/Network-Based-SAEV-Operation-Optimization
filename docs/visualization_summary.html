<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>SAEV&#x8fd0;&#x8425;&#x4f18;&#x5316;&#x56fe;&#x7ed3;&#x6784;&#x6c42;&#x89e3;&#x7ed3;&#x679c;&#x53ef;&#x89c6;&#x5316;&#x65b9;&#x6848;</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
            
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h1 id="saev运营优化图结构求解结果可视化方案">SAEV运营优化图结构求解结果可视化方案</h1>
<h2 id="项目概述">项目概述</h2>
<p>本项目为SAEV（共享自动驾驶电动汽车）运营优化图结构求解结果设计了一套完整的可视化方案。该方案能够全面展示基于时空-电量网格的最小费用流优化模型的求解结果，帮助研究人员和运营人员深入理解优化结果。</p>
<h2 id="核心挑战">核心挑战</h2>
<h3 id="1-数据复杂性">1. 数据复杂性</h3>
<ul>
<li><strong>大规模数据</strong>: 包含230万+条弧记录，2.6万+个节点</li>
<li><strong>多维数据</strong>: 时空-电量三维网格，包含时间、区域、SOC等级</li>
<li><strong>多类型弧</strong>: 10种不同类型的弧（idle, reposition, tochg, chg_enter, chg_occ, chg_step, svc_enter, svc_gate, svc_exit, to_sink）</li>
<li><strong>稀疏流量</strong>: 仅有1,058条弧有实际流量，占总数的0.05%</li>
</ul>
<h3 id="2-可视化挑战">2. 可视化挑战</h3>
<ul>
<li><strong>高维数据</strong>: 需要同时展示时间、空间、电量、流量、成本等多个维度</li>
<li><strong>网络复杂性</strong>: 图结构包含真实节点和伪节点，连接关系复杂</li>
<li><strong>交互需求</strong>: 需要支持多层次的交互式探索</li>
<li><strong>性能要求</strong>: 需要处理大规模数据而不影响可视化性能</li>
</ul>
<h2 id="解决方案架构">解决方案架构</h2>
<h3 id="1-模块化设计">1. 模块化设计</h3>
<pre><code>SAEVResultVisualizer
├── 数据加载模块
├── 流量分析模块
├── 时空演化模块
├── 网络拓扑模块
├── 地图可视化模块
├── 仪表板模块
└── 报告生成模块
</code></pre>
<h3 id="2-多层次可视化">2. 多层次可视化</h3>
<ul>
<li><strong>宏观层面</strong>: 整体流量分布、成本效益分析</li>
<li><strong>中观层面</strong>: 时空演化、区域间流动</li>
<li><strong>微观层面</strong>: 具体弧的流量、成本详情</li>
<li><strong>交互层面</strong>: 支持钻取、筛选、缩放等操作</li>
</ul>
<h2 id="核心功能">核心功能</h2>
<h3 id="1-流量汇总分析-plot_flow_summary">1. 流量汇总分析 (<code>plot_flow_summary</code>)</h3>
<ul>
<li><strong>按弧类型统计</strong>: 展示各类弧的流量分布</li>
<li><strong>按时间步统计</strong>: 展示流量随时间的变化</li>
<li><strong>成本贡献分析</strong>: 展示各类弧的成本贡献</li>
<li><strong>流量分布直方图</strong>: 展示流量值的分布特征</li>
</ul>
<h3 id="2-时空流量演化-plot_spatiotemporal_flow">2. 时空流量演化 (<code>plot_spatiotemporal_flow</code>)</h3>
<ul>
<li><strong>时间-流量热力图</strong>: 展示不同弧类型在不同时间的流量</li>
<li><strong>SOC-流量分布</strong>: 展示不同电量等级的流量分布</li>
<li><strong>区域流量分布</strong>: 展示不同区域的流量活跃度</li>
<li><strong>弧类型时间演化</strong>: 展示各类弧随时间的变化趋势</li>
</ul>
<h3 id="3-网络拓扑可视化-plot_network_topology">3. 网络拓扑可视化 (<code>plot_network_topology</code>)</h3>
<ul>
<li><strong>节点和边</strong>: 展示网络的基本结构</li>
<li><strong>流量权重</strong>: 根据流量大小调整边的粗细</li>
<li><strong>类型标识</strong>: 根据弧类型设置边的颜色</li>
<li><strong>节点大小</strong>: 根据流量大小调整节点大小</li>
</ul>
<h3 id="4-交互式地图-create_interactive_map">4. 交互式地图 (<code>create_interactive_map</code>)</h3>
<ul>
<li><strong>流量连线</strong>: 在地图上展示区域间的流量</li>
<li><strong>充电站标记</strong>: 展示充电站的位置和属性</li>
<li><strong>区域标记</strong>: 展示区域中心点</li>
<li><strong>悬停信息</strong>: 显示详细的流量和成本信息</li>
</ul>
<h3 id="5-综合仪表板-create_dashboard">5. 综合仪表板 (<code>create_dashboard</code>)</h3>
<ul>
<li><strong>流量分布饼图</strong>: 整体流量分布概览</li>
<li><strong>成本分析柱状图</strong>: 成本贡献分析</li>
<li><strong>时间演化折线图</strong>: 时间趋势分析</li>
<li><strong>区域活跃度</strong>: 区域流量活跃度排名</li>
<li><strong>SOC分布</strong>: 电量等级分布</li>
<li><strong>效率指标</strong>: 关键性能指标仪表盘</li>
</ul>
<h2 id="技术实现">技术实现</h2>
<h3 id="1-数据预处理">1. 数据预处理</h3>
<pre><code class="language-python"><span class="hljs-comment"># 合并流量和弧信息</span>
df = flows.merge(arcs, on=<span class="hljs-string">&#x27;arc_id&#x27;</span>, how=<span class="hljs-string">&#x27;left&#x27;</span>, suffixes=(<span class="hljs-string">&#x27;_flow&#x27;</span>, <span class="hljs-string">&#x27;_arc&#x27;</span>))

<span class="hljs-comment"># 过滤活跃流量</span>
active_flows = df[df[<span class="hljs-string">&#x27;flow&#x27;</span>] &gt; <span class="hljs-number">0</span>]
</code></pre>
<h3 id="2-可视化库选择">2. 可视化库选择</h3>
<ul>
<li><strong>matplotlib</strong>: 静态图表，高质量PNG输出</li>
<li><strong>plotly</strong>: 交互式图表，HTML输出</li>
<li><strong>folium</strong>: 地图可视化，交互式地图</li>
<li><strong>networkx</strong>: 网络图分析，拓扑结构展示</li>
</ul>
<h3 id="3-性能优化">3. 性能优化</h3>
<ul>
<li><strong>数据过滤</strong>: 只处理有流量的弧</li>
<li><strong>节点限制</strong>: 网络图限制节点数量</li>
<li><strong>分批处理</strong>: 大数据集分批可视化</li>
<li><strong>缓存机制</strong>: 避免重复计算</li>
</ul>
<h2 id="输出文件">输出文件</h2>
<h3 id="1-静态图表">1. 静态图表</h3>
<ul>
<li><code>flow_summary.png</code>: 流量汇总分析</li>
<li><code>network_topology.png</code>: 网络拓扑图</li>
<li><code>custom_analysis.png</code>: 自定义分析图表</li>
</ul>
<h3 id="2-交互式图表">2. 交互式图表</h3>
<ul>
<li><code>spatiotemporal_flow.html</code>: 时空流量演化</li>
<li><code>interactive_map.html</code>: 交互式地图</li>
<li><code>dashboard.html</code>: 综合仪表板</li>
</ul>
<h3 id="3-文本报告">3. 文本报告</h3>
<ul>
<li><code>report.txt</code>: 详细的数据分析报告</li>
</ul>
<h2 id="使用示例">使用示例</h2>
<h3 id="基本使用">基本使用</h3>
<pre><code class="language-python"><span class="hljs-keyword">from</span> visualize_solver_results <span class="hljs-keyword">import</span> SAEVResultVisualizer

<span class="hljs-comment"># 创建可视化器</span>
visualizer = SAEVResultVisualizer(data_dir=<span class="hljs-string">&quot;src&quot;</span>)

<span class="hljs-comment"># 生成完整报告</span>
visualizer.generate_report()
</code></pre>
<h3 id="自定义分析">自定义分析</h3>
<pre><code class="language-python"><span class="hljs-comment"># 流量汇总分析</span>
visualizer.plot_flow_summary(<span class="hljs-string">&quot;flow_summary.png&quot;</span>)

<span class="hljs-comment"># 网络拓扑图</span>
visualizer.plot_network_topology(max_nodes=<span class="hljs-number">50</span>, save_path=<span class="hljs-string">&quot;network.png&quot;</span>)

<span class="hljs-comment"># 交互式地图</span>
visualizer.create_interactive_map(<span class="hljs-string">&quot;map.html&quot;</span>)
</code></pre>
<h2 id="关键发现">关键发现</h2>
<h3 id="1-流量分布特征">1. 流量分布特征</h3>
<ul>
<li><strong>总流量</strong>: 2,200单位</li>
<li><strong>活跃弧</strong>: 1,058条（占总数的0.05%）</li>
<li><strong>主要弧类型</strong>: tochg (202条), reposition (198条), chg_enter (198条)</li>
<li><strong>时间分布</strong>: 主要集中在时间步3和6</li>
</ul>
<h3 id="2-成本结构">2. 成本结构</h3>
<ul>
<li><strong>总成本</strong>: -6,570.48（负成本表示收益）</li>
<li><strong>主要成本来源</strong>: chg_step (-8,000), reposition (453.9), chg_occ (487)</li>
<li><strong>成本效益</strong>: 充电步骤产生最大收益</li>
</ul>
<h3 id="3-网络特征">3. 网络特征</h3>
<ul>
<li><strong>区域覆盖</strong>: 涉及221个区域</li>
<li><strong>SOC范围</strong>: 0-100等级</li>
<li><strong>时间跨度</strong>: 1-8时间步</li>
<li><strong>网络密度</strong>: 相对稀疏，主要集中在核心区域</li>
</ul>
<h2 id="扩展功能">扩展功能</h2>
<h3 id="1-高级分析">1. 高级分析</h3>
<ul>
<li><strong>聚类分析</strong>: 识别流量模式</li>
<li><strong>异常检测</strong>: 发现异常流量</li>
<li><strong>预测分析</strong>: 基于历史数据预测</li>
<li><strong>敏感性分析</strong>: 参数变化影响</li>
</ul>
<h3 id="2-交互增强">2. 交互增强</h3>
<ul>
<li><strong>实时更新</strong>: 支持数据实时更新</li>
<li><strong>多视图同步</strong>: 多个图表联动</li>
<li><strong>自定义筛选</strong>: 支持复杂筛选条件</li>
<li><strong>导出功能</strong>: 支持多种格式导出</li>
</ul>
<h3 id="3-性能优化-1">3. 性能优化</h3>
<ul>
<li><strong>GPU加速</strong>: 利用GPU进行大规模计算</li>
<li><strong>分布式处理</strong>: 支持分布式数据处理</li>
<li><strong>缓存优化</strong>: 智能缓存机制</li>
<li><strong>增量更新</strong>: 支持增量数据更新</li>
</ul>
<h2 id="总结">总结</h2>
<p>本可视化方案成功解决了SAEV运营优化图结构求解结果的可视化挑战，提供了多层次、多角度的分析视角。通过模块化设计和性能优化，能够有效处理大规模数据，为研究人员和运营人员提供深入洞察。</p>
<h3 id="主要贡献">主要贡献</h3>
<ol>
<li><strong>全面性</strong>: 覆盖了流量、成本、时空、网络等多个维度</li>
<li><strong>交互性</strong>: 提供了丰富的交互式可视化功能</li>
<li><strong>可扩展性</strong>: 模块化设计支持功能扩展</li>
<li><strong>实用性</strong>: 提供了完整的使用文档和示例</li>
</ol>
<h3 id="应用价值">应用价值</h3>
<ol>
<li><strong>研究支持</strong>: 帮助研究人员理解优化结果</li>
<li><strong>运营指导</strong>: 为运营决策提供数据支持</li>
<li><strong>问题诊断</strong>: 快速识别运营中的问题</li>
<li><strong>效果评估</strong>: 评估优化策略的效果</li>
</ol>
<p>这套可视化方案为SAEV运营优化研究提供了强有力的工具支持，有助于推动相关领域的发展。</p>

            
            
        </body>
        </html>