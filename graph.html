<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Graph by t (directed trace + relayout)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
  html, body { height: 100%; margin: 0; }
  .row {
    padding: 8px 12px; border-bottom: 1px solid #e5e7eb;
    display: flex; gap: 16px; flex-wrap: wrap; align-items: center;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  }
  #legend, #vlegend { display: flex; gap: 12px; flex-wrap: wrap; align-items: center; }
  .chip { display: inline-flex; gap: 6px; align-items: center;
          padding: 2px 8px; border-radius: 999px; background: #f3f4f6; font-size: 12px; }
  .swatch { width: 10px; height: 10px; border-radius: 50%; display: inline-block; }
  #network { width: 100%; height: calc(100% - 168px); }
  label { user-select: none; }
  .btn { padding: 4px 10px; border:1px solid #e5e7eb; background:#fff; border-radius:8px; cursor:pointer; }
  div.vis-network div.vis-tooltip { white-space: pre-line; max-width: 520px; }
</style>
<script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
</head>
<body>
  <div class="row">
    <div><strong>t columns:</strong> 1, 2, 3, 4</div>
    <div><strong>zones:</strong> (NA), 308.0, 317.0</div>
    <label><input type="checkbox" id="toggleLabels"> show labels</label>
    <label title="只保留 flow>0 的边，并隐藏未参与这些边的节点">
      <input type="checkbox" id="flowOnly"> flow-only
    </label>
    <label><input type="checkbox" id="showVirtual" checked> show virtual nodes</label>
  </div>

  <div class="row">
    <div id="legend"><strong>Edge types:</strong><label class="chip"><span class="swatch" style="background:#1f77b4"></span><input type="checkbox" class="etype" value="chg_enter" checked/> chg_enter</label><label class="chip"><span class="swatch" style="background:#ff7f0e"></span><input type="checkbox" class="etype" value="chg_occ" checked/> chg_occ</label><label class="chip"><span class="swatch" style="background:#2ca02c"></span><input type="checkbox" class="etype" value="chg_step" checked/> chg_step</label><label class="chip"><span class="swatch" style="background:#d62728"></span><input type="checkbox" class="etype" value="from_source" checked/> from_source</label><label class="chip"><span class="swatch" style="background:#9467bd"></span><input type="checkbox" class="etype" value="idle" checked/> idle</label><label class="chip"><span class="swatch" style="background:#8c564b"></span><input type="checkbox" class="etype" value="svc_enter" checked/> svc_enter</label><label class="chip"><span class="swatch" style="background:#e377c2"></span><input type="checkbox" class="etype" value="svc_exit" checked/> svc_exit</label><label class="chip"><span class="swatch" style="background:#7f7f7f"></span><input type="checkbox" class="etype" value="svc_gate" checked/> svc_gate</label><label class="chip"><span class="swatch" style="background:#bcbd22"></span><input type="checkbox" class="etype" value="to_sink" checked/> to_sink</label><label class="chip"><span class="swatch" style="background:#17becf"></span><input type="checkbox" class="etype" value="tochg" checked/> tochg</label></div>
  </div>

  <div class="row">
    <div id="vlegend"><strong>Virtual categories:</strong><label class="chip"><span class="swatch" style="background:#06b6d4"></span><input type="checkbox" class="vcat" value="charging" checked/> charging</label><label class="chip"><span class="swatch" style="background:#ef4444"></span><input type="checkbox" class="vcat" value="service" checked/> service</label><label class="chip"><span class="swatch" style="background:#9ca3af"></span><input type="checkbox" class="vcat" value="unknown" checked/> unknown</label></div>
  </div>

  <div class="row">
    <label title="点击节点后，仅显示该节点与其所有直连边及对端节点，并动态重排">
      <input type="checkbox" id="focusOnClick"> focus on click
    </label>
    <button class="btn" id="clearFocus" title="退出聚焦并恢复原始布局">clear</button>

    <label title="点击节点后，仅保留其在 flow>0 的有向通路，并按层级动态重排">
      <input type="checkbox" id="tracePath"> trace path (flow)
    </label>
    <span>
      path dir:
      <label><input type="radio" name="pathdir" value="forward"> forward</label>
      <label><input type="radio" name="pathdir" value="backward"> backward</label>
      <label><input type="radio" name="pathdir" value="both" checked> both</label>
    </span>
    <button class="btn" id="clearPath" title="关闭通路模式并恢复筛选">clear path</button>
  </div>

  <div id="network"></div>

  <script>
    const ALL_NODES = [{"id": "20", "label": " ", "title": "Node: 20\nt: 1\nzone: 308.0\nsoc: 100\nsupply: 0", "x": 0.0, "y": -420.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "41", "label": " ", "title": "Node: 41\nt: 2\nzone: 308.0\nsoc: 100\nsupply: 0", "x": 260.0, "y": -420.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "44", "label": " ", "title": "Node: 44\nt: 3\nzone: 308.0\nsoc: 10\nsupply: 0", "x": 481.0, "y": -459.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "45", "label": " ", "title": "Node: 45\nt: 3\nzone: 308.0\nsoc: 15\nsupply: 0", "x": 507.0, "y": -459.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "46", "label": " ", "title": "Node: 46\nt: 3\nzone: 308.0\nsoc: 20\nsupply: 0", "x": 533.0, "y": -459.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "47", "label": " ", "title": "Node: 47\nt: 3\nzone: 308.0\nsoc: 25\nsupply: 0", "x": 559.0, "y": -459.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "48", "label": " ", "title": "Node: 48\nt: 3\nzone: 308.0\nsoc: 30\nsupply: 0", "x": 481.0, "y": -433.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "49", "label": " ", "title": "Node: 49\nt: 3\nzone: 308.0\nsoc: 35\nsupply: 0", "x": 507.0, "y": -433.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "50", "label": " ", "title": "Node: 50\nt: 3\nzone: 308.0\nsoc: 40\nsupply: 0", "x": 533.0, "y": -433.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "51", "label": " ", "title": "Node: 51\nt: 3\nzone: 308.0\nsoc: 45\nsupply: 0", "x": 559.0, "y": -433.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "52", "label": " ", "title": "Node: 52\nt: 3\nzone: 308.0\nsoc: 50\nsupply: 0", "x": 481.0, "y": -407.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "53", "label": " ", "title": "Node: 53\nt: 3\nzone: 308.0\nsoc: 55\nsupply: 0", "x": 507.0, "y": -407.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "54", "label": " ", "title": "Node: 54\nt: 3\nzone: 308.0\nsoc: 60\nsupply: 0", "x": 533.0, "y": -407.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "56", "label": " ", "title": "Node: 56\nt: 3\nzone: 308.0\nsoc: 70\nsupply: 0", "x": 559.0, "y": -407.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "58", "label": " ", "title": "Node: 58\nt: 3\nzone: 308.0\nsoc: 80\nsupply: 0", "x": 481.0, "y": -381.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "60", "label": " ", "title": "Node: 60\nt: 3\nzone: 308.0\nsoc: 90\nsupply: 0", "x": 507.0, "y": -381.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "62", "label": " ", "title": "Node: 62\nt: 3\nzone: 308.0\nsoc: 100\nsupply: 0", "x": 533.0, "y": -381.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "63", "label": " ", "title": "Node: 63\nt: 4\nzone: 308.0\nsoc: 0\nsupply: 0", "x": 728.0, "y": -472.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "64", "label": " ", "title": "Node: 64\nt: 4\nzone: 308.0\nsoc: 5\nsupply: 0", "x": 754.0, "y": -472.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "65", "label": " ", "title": "Node: 65\nt: 4\nzone: 308.0\nsoc: 10\nsupply: 0", "x": 780.0, "y": -472.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "66", "label": " ", "title": "Node: 66\nt: 4\nzone: 308.0\nsoc: 15\nsupply: 0", "x": 806.0, "y": -472.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "67", "label": " ", "title": "Node: 67\nt: 4\nzone: 308.0\nsoc: 20\nsupply: 0", "x": 832.0, "y": -472.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "68", "label": " ", "title": "Node: 68\nt: 4\nzone: 308.0\nsoc: 25\nsupply: 0", "x": 728.0, "y": -446.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "69", "label": " ", "title": "Node: 69\nt: 4\nzone: 308.0\nsoc: 30\nsupply: 0", "x": 754.0, "y": -446.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "70", "label": " ", "title": "Node: 70\nt: 4\nzone: 308.0\nsoc: 35\nsupply: 0", "x": 780.0, "y": -446.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "71", "label": " ", "title": "Node: 71\nt: 4\nzone: 308.0\nsoc: 40\nsupply: 0", "x": 806.0, "y": -446.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "72", "label": " ", "title": "Node: 72\nt: 4\nzone: 308.0\nsoc: 45\nsupply: 0", "x": 832.0, "y": -446.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "73", "label": " ", "title": "Node: 73\nt: 4\nzone: 308.0\nsoc: 50\nsupply: 0", "x": 728.0, "y": -420.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "74", "label": " ", "title": "Node: 74\nt: 4\nzone: 308.0\nsoc: 55\nsupply: 0", "x": 754.0, "y": -420.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "75", "label": " ", "title": "Node: 75\nt: 4\nzone: 308.0\nsoc: 60\nsupply: 0", "x": 780.0, "y": -420.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "76", "label": " ", "title": "Node: 76\nt: 4\nzone: 308.0\nsoc: 65\nsupply: 0", "x": 806.0, "y": -420.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "77", "label": " ", "title": "Node: 77\nt: 4\nzone: 308.0\nsoc: 70\nsupply: 0", "x": 832.0, "y": -420.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "78", "label": " ", "title": "Node: 78\nt: 4\nzone: 308.0\nsoc: 75\nsupply: 0", "x": 728.0, "y": -394.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "79", "label": " ", "title": "Node: 79\nt: 4\nzone: 308.0\nsoc: 80\nsupply: 0", "x": 754.0, "y": -394.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "80", "label": " ", "title": "Node: 80\nt: 4\nzone: 308.0\nsoc: 85\nsupply: 0", "x": 780.0, "y": -394.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "81", "label": " ", "title": "Node: 81\nt: 4\nzone: 308.0\nsoc: 90\nsupply: 0", "x": 806.0, "y": -394.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "82", "label": " ", "title": "Node: 82\nt: 4\nzone: 308.0\nsoc: 95\nsupply: 0", "x": 832.0, "y": -394.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "83", "label": " ", "title": "Node: 83\nt: 4\nzone: 308.0\nsoc: 100\nsupply: 0", "x": 728.0, "y": -368.0, "fixed": true, "group": "zone_308.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "104", "label": " ", "title": "Node: 104\nt: 1\nzone: 317.0\nsoc: 100\nsupply: 0", "x": 0.0, "y": -840.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "125", "label": " ", "title": "Node: 125\nt: 2\nzone: 317.0\nsoc: 100\nsupply: 0", "x": 260.0, "y": -840.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "130", "label": " ", "title": "Node: 130\nt: 3\nzone: 317.0\nsoc: 20\nsupply: 0", "x": 481.0, "y": -866.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "131", "label": " ", "title": "Node: 131\nt: 3\nzone: 317.0\nsoc: 25\nsupply: 0", "x": 507.0, "y": -866.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "132", "label": " ", "title": "Node: 132\nt: 3\nzone: 317.0\nsoc: 30\nsupply: 0", "x": 533.0, "y": -866.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "133", "label": " ", "title": "Node: 133\nt: 3\nzone: 317.0\nsoc: 35\nsupply: 0", "x": 559.0, "y": -866.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "134", "label": " ", "title": "Node: 134\nt: 3\nzone: 317.0\nsoc: 40\nsupply: 0", "x": 481.0, "y": -840.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "135", "label": " ", "title": "Node: 135\nt: 3\nzone: 317.0\nsoc: 45\nsupply: 0", "x": 507.0, "y": -840.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "136", "label": " ", "title": "Node: 136\nt: 3\nzone: 317.0\nsoc: 50\nsupply: 0", "x": 533.0, "y": -840.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "137", "label": " ", "title": "Node: 137\nt: 3\nzone: 317.0\nsoc: 55\nsupply: 0", "x": 559.0, "y": -840.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "138", "label": " ", "title": "Node: 138\nt: 3\nzone: 317.0\nsoc: 60\nsupply: 0", "x": 481.0, "y": -814.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "146", "label": " ", "title": "Node: 146\nt: 3\nzone: 317.0\nsoc: 100\nsupply: 0", "x": 507.0, "y": -814.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "147", "label": " ", "title": "Node: 147\nt: 4\nzone: 317.0\nsoc: 0\nsupply: 0", "x": 728.0, "y": -892.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "148", "label": " ", "title": "Node: 148\nt: 4\nzone: 317.0\nsoc: 5\nsupply: 0", "x": 754.0, "y": -892.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "149", "label": " ", "title": "Node: 149\nt: 4\nzone: 317.0\nsoc: 10\nsupply: 0", "x": 780.0, "y": -892.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "150", "label": " ", "title": "Node: 150\nt: 4\nzone: 317.0\nsoc: 15\nsupply: 0", "x": 806.0, "y": -892.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "151", "label": " ", "title": "Node: 151\nt: 4\nzone: 317.0\nsoc: 20\nsupply: 0", "x": 832.0, "y": -892.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "152", "label": " ", "title": "Node: 152\nt: 4\nzone: 317.0\nsoc: 25\nsupply: 0", "x": 728.0, "y": -866.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "153", "label": " ", "title": "Node: 153\nt: 4\nzone: 317.0\nsoc: 30\nsupply: 0", "x": 754.0, "y": -866.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "154", "label": " ", "title": "Node: 154\nt: 4\nzone: 317.0\nsoc: 35\nsupply: 0", "x": 780.0, "y": -866.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "155", "label": " ", "title": "Node: 155\nt: 4\nzone: 317.0\nsoc: 40\nsupply: 0", "x": 806.0, "y": -866.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "156", "label": " ", "title": "Node: 156\nt: 4\nzone: 317.0\nsoc: 45\nsupply: 0", "x": 832.0, "y": -866.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "157", "label": " ", "title": "Node: 157\nt: 4\nzone: 317.0\nsoc: 50\nsupply: 0", "x": 728.0, "y": -840.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "158", "label": " ", "title": "Node: 158\nt: 4\nzone: 317.0\nsoc: 55\nsupply: 0", "x": 754.0, "y": -840.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "159", "label": " ", "title": "Node: 159\nt: 4\nzone: 317.0\nsoc: 60\nsupply: 0", "x": 780.0, "y": -840.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "160", "label": " ", "title": "Node: 160\nt: 4\nzone: 317.0\nsoc: 65\nsupply: 0", "x": 806.0, "y": -840.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "161", "label": " ", "title": "Node: 161\nt: 4\nzone: 317.0\nsoc: 70\nsupply: 0", "x": 832.0, "y": -840.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "162", "label": " ", "title": "Node: 162\nt: 4\nzone: 317.0\nsoc: 75\nsupply: 0", "x": 728.0, "y": -814.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "163", "label": " ", "title": "Node: 163\nt: 4\nzone: 317.0\nsoc: 80\nsupply: 0", "x": 754.0, "y": -814.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "164", "label": " ", "title": "Node: 164\nt: 4\nzone: 317.0\nsoc: 85\nsupply: 0", "x": 780.0, "y": -814.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "165", "label": " ", "title": "Node: 165\nt: 4\nzone: 317.0\nsoc: 90\nsupply: 0", "x": 806.0, "y": -814.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "166", "label": " ", "title": "Node: 166\nt: 4\nzone: 317.0\nsoc: 95\nsupply: 0", "x": 832.0, "y": -814.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "167", "label": " ", "title": "Node: 167\nt: 4\nzone: 317.0\nsoc: 100\nsupply: 0", "x": 728.0, "y": -788.0, "fixed": true, "group": "zone_317.0", "is_virtual": false, "vcat": "", "shape": "dot", "size": 8}, {"id": "-2065537959644669696", "label": " ", "title": "Node: -2065537959644669696\nt: virtual\nzone: (NA)\nvirtual category: unknown\nsupply: 200", "x": 0.0, "y": 420.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "unknown", "shape": "diamond", "size": 8, "color": {"background": "#9ca3af", "border": "#9ca3af"}}, {"id": "-8724511148913573888", "label": " ", "title": "Node: -8724511148913573888\nt: virtual\nzone: (NA)\nvirtual category: unknown\nsupply: -200", "x": 780.0, "y": 420.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "unknown", "shape": "diamond", "size": 8, "color": {"background": "#9ca3af", "border": "#9ca3af"}}, {"id": "-8608577930118051840", "label": " ", "title": "Node: -8608577930118051840\nt: virtual\nzone: (NA)\nvirtual category: charging\nsupply: 0", "x": 520.0, "y": 140.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "charging", "shape": "diamond", "size": 8, "color": {"background": "#06b6d4", "border": "#06b6d4"}}, {"id": "-8500640205483802624", "label": " ", "title": "Node: -8500640205483802624\nt: virtual\nzone: (NA)\nvirtual category: charging\nsupply: 0", "x": 780.0, "y": 140.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "charging", "shape": "diamond", "size": 8, "color": {"background": "#06b6d4", "border": "#06b6d4"}}, {"id": "-6972045642524965888", "label": " ", "title": "Node: -6972045642524965888\nt: virtual\nzone: (NA)\nvirtual category: service\nsupply: 0", "x": 767.0, "y": 280.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "service", "shape": "diamond", "size": 8, "color": {"background": "#ef4444", "border": "#ef4444"}}, {"id": "-328203732588839040", "label": " ", "title": "Node: -328203732588839040\nt: virtual\nzone: (NA)\nvirtual category: service\nsupply: 0", "x": 793.0, "y": 280.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "service", "shape": "diamond", "size": 8, "color": {"background": "#ef4444", "border": "#ef4444"}}, {"id": "-6832668076301775872", "label": " ", "title": "Node: -6832668076301775872\nt: virtual\nzone: (NA)\nvirtual category: service\nsupply: 0", "x": 247.0, "y": 280.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "service", "shape": "diamond", "size": 8, "color": {"background": "#ef4444", "border": "#ef4444"}}, {"id": "-2113565832596246016", "label": " ", "title": "Node: -2113565832596246016\nt: virtual\nzone: (NA)\nvirtual category: service\nsupply: 0", "x": 273.0, "y": 280.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "service", "shape": "diamond", "size": 8, "color": {"background": "#ef4444", "border": "#ef4444"}}, {"id": "-6071307011258056704", "label": " ", "title": "Node: -6071307011258056704\nt: virtual\nzone: (NA)\nvirtual category: service\nsupply: 0", "x": 507.0, "y": 280.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "service", "shape": "diamond", "size": 8, "color": {"background": "#ef4444", "border": "#ef4444"}}, {"id": "-1312670775491030016", "label": " ", "title": "Node: -1312670775491030016\nt: virtual\nzone: (NA)\nvirtual category: service\nsupply: 0", "x": 533.0, "y": 280.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "service", "shape": "diamond", "size": 8, "color": {"background": "#ef4444", "border": "#ef4444"}}, {"id": "-5303467566796545024", "label": " ", "title": "Node: -5303467566796545024\nt: virtual\nzone: (NA)\nvirtual category: charging\nsupply: 0", "x": -273.0, "y": 140.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "charging", "shape": "diamond", "size": 8, "color": {"background": "#06b6d4", "border": "#06b6d4"}}, {"id": "-5204973881738096640", "label": " ", "title": "Node: -5204973881738096640\nt: virtual\nzone: (NA)\nvirtual category: charging\nsupply: 0", "x": -247.0, "y": 140.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "charging", "shape": "diamond", "size": 8, "color": {"background": "#06b6d4", "border": "#06b6d4"}}, {"id": "-4938161853202029568", "label": " ", "title": "Node: -4938161853202029568\nt: virtual\nzone: (NA)\nvirtual category: charging\nsupply: 0", "x": -13.0, "y": 140.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "charging", "shape": "diamond", "size": 8, "color": {"background": "#06b6d4", "border": "#06b6d4"}}, {"id": "-4728362194768353280", "label": " ", "title": "Node: -4728362194768353280\nt: virtual\nzone: (NA)\nvirtual category: charging\nsupply: 0", "x": 13.0, "y": 140.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "charging", "shape": "diamond", "size": 8, "color": {"background": "#06b6d4", "border": "#06b6d4"}}, {"id": "-4702087699455048704", "label": " ", "title": "Node: -4702087699455048704\nt: virtual\nzone: (NA)\nvirtual category: charging\nsupply: 0", "x": 247.0, "y": 140.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "charging", "shape": "diamond", "size": 8, "color": {"background": "#06b6d4", "border": "#06b6d4"}}, {"id": "-316543663216743104", "label": " ", "title": "Node: -316543663216743104\nt: virtual\nzone: (NA)\nvirtual category: charging\nsupply: 0", "x": 273.0, "y": 140.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "charging", "shape": "diamond", "size": 8, "color": {"background": "#06b6d4", "border": "#06b6d4"}}, {"id": "-2755364372539861504", "label": " ", "title": "Node: -2755364372539861504\nt: virtual\nzone: (NA)\nvirtual category: service\nsupply: 0", "x": -13.0, "y": 280.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "service", "shape": "diamond", "size": 8, "color": {"background": "#ef4444", "border": "#ef4444"}}, {"id": "-242693579967937152", "label": " ", "title": "Node: -242693579967937152\nt: virtual\nzone: (NA)\nvirtual category: service\nsupply: 0", "x": 13.0, "y": 280.0, "fixed": true, "group": "zone_(NA)", "is_virtual": true, "vcat": "service", "shape": "diamond", "size": 8, "color": {"background": "#ef4444", "border": "#ef4444"}}];
    const ALL_EDGES = [{"from": "52", "to": "73", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 52 → 73\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "53", "to": "74", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 53 → 74\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "51", "to": "72", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 51 → 72\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "146", "to": "167", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 146 → 167\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "45", "to": "66", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 45 → 66\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "44", "to": "65", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 44 → 65\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "138", "to": "159", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: 138 → 159\ntype: idle\nflow: 10\ncost: 10", "edge_type": "idle", "flow": 10.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "41", "to": "62", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 41 → 62\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "132", "to": "153", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 132 → 153\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "46", "to": "67", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 46 → 67\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "136", "to": "157", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 136 → 157\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "58", "to": "79", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 58 → 79\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "48", "to": "69", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 48 → 69\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "56", "to": "77", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 56 → 77\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "137", "to": "158", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 137 → 158\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "104", "to": "125", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: 104 → 125\ntype: idle\nflow: 10\ncost: 10", "edge_type": "idle", "flow": 10.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "62", "to": "83", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 62 → 83\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "20", "to": "41", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: 20 → 41\ntype: idle\nflow: 10\ncost: 10", "edge_type": "idle", "flow": 10.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "54", "to": "75", "arrows": "to", "width": 6, "smooth": false, "title": "Edge: 54 → 75\ntype: idle\nflow: 170\ncost: 10", "edge_type": "idle", "flow": 170.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "50", "to": "71", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 50 → 71\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "60", "to": "81", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 60 → 81\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "49", "to": "70", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 49 → 70\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "133", "to": "154", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 133 → 154\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "134", "to": "155", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 134 → 155\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "130", "to": "151", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 130 → 151\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "125", "to": "146", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 125 → 146\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "131", "to": "152", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 131 → 152\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "47", "to": "68", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 47 → 68\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "135", "to": "156", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 135 → 156\ntype: idle\nflow: 0\ncost: 10", "edge_type": "idle", "flow": 0.0, "dashes": false, "color": {"color": "#9467bd"}}, {"from": "-328203732588839040", "to": "158", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -328203732588839040 → 158\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-328203732588839040", "to": "151", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -328203732588839040 → 151\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-328203732588839040", "to": "153", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -328203732588839040 → 153\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-1312670775491030016", "to": "45", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -1312670775491030016 → 45\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-328203732588839040", "to": "152", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -328203732588839040 → 152\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-1312670775491030016", "to": "53", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -1312670775491030016 → 53\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-328203732588839040", "to": "159", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: -328203732588839040 → 159\ntype: svc_exit\nflow: 10\ncost: 0", "edge_type": "svc_exit", "flow": 10.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6972045642524965888", "to": "66", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6972045642524965888 → 66\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-328203732588839040", "to": "155", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -328203732588839040 → 155\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6972045642524965888", "to": "72", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6972045642524965888 → 72\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6071307011258056704", "to": "133", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6071307011258056704 → 133\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6972045642524965888", "to": "68", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6972045642524965888 → 68\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-1312670775491030016", "to": "52", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -1312670775491030016 → 52\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-2113565832596246016", "to": "-6972045642524965888", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: -2113565832596246016 → -6972045642524965888\ntype: svc_gate\nflow: 10\ncost: -15.7", "edge_type": "svc_gate", "flow": 10.0, "dashes": true, "color": {"color": "#7f7f7f"}}, {"from": "104", "to": "-242693579967937152", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: 104 → -242693579967937152\ntype: svc_enter\nflow: 10\ncost: 0", "edge_type": "svc_enter", "flow": 10.0, "dashes": true, "color": {"color": "#8c564b"}}, {"from": "-6972045642524965888", "to": "71", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6972045642524965888 → 71\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "20", "to": "-2755364372539861504", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: 20 → -2755364372539861504\ntype: svc_enter\nflow: 10\ncost: 0", "edge_type": "svc_enter", "flow": 10.0, "dashes": true, "color": {"color": "#8c564b"}}, {"from": "-2755364372539861504", "to": "-6071307011258056704", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: -2755364372539861504 → -6071307011258056704\ntype: svc_gate\nflow: 10\ncost: -15.7", "edge_type": "svc_gate", "flow": 10.0, "dashes": true, "color": {"color": "#7f7f7f"}}, {"from": "-1312670775491030016", "to": "49", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -1312670775491030016 → 49\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6071307011258056704", "to": "131", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6071307011258056704 → 131\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6972045642524965888", "to": "74", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6972045642524965888 → 74\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6071307011258056704", "to": "135", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6071307011258056704 → 135\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-1312670775491030016", "to": "46", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -1312670775491030016 → 46\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6071307011258056704", "to": "138", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: -6071307011258056704 → 138\ntype: svc_exit\nflow: 10\ncost: 0", "edge_type": "svc_exit", "flow": 10.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6972045642524965888", "to": "70", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6972045642524965888 → 70\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6972045642524965888", "to": "69", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6972045642524965888 → 69\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-1312670775491030016", "to": "54", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: -1312670775491030016 → 54\ntype: svc_exit\nflow: 10\ncost: 0", "edge_type": "svc_exit", "flow": 10.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-328203732588839040", "to": "157", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -328203732588839040 → 157\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "41", "to": "-6832668076301775872", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: 41 → -6832668076301775872\ntype: svc_enter\nflow: 10\ncost: 0", "edge_type": "svc_enter", "flow": 10.0, "dashes": true, "color": {"color": "#8c564b"}}, {"from": "-6832668076301775872", "to": "-328203732588839040", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: -6832668076301775872 → -328203732588839040\ntype: svc_gate\nflow: 10\ncost: -15.7", "edge_type": "svc_gate", "flow": 10.0, "dashes": true, "color": {"color": "#7f7f7f"}}, {"from": "-1312670775491030016", "to": "51", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -1312670775491030016 → 51\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6972045642524965888", "to": "65", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6972045642524965888 → 65\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6972045642524965888", "to": "67", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6972045642524965888 → 67\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6071307011258056704", "to": "137", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6071307011258056704 → 137\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-1312670775491030016", "to": "47", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -1312670775491030016 → 47\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6972045642524965888", "to": "75", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: -6972045642524965888 → 75\ntype: svc_exit\nflow: 10\ncost: 0", "edge_type": "svc_exit", "flow": 10.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-1312670775491030016", "to": "44", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -1312670775491030016 → 44\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-328203732588839040", "to": "154", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -328203732588839040 → 154\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-1312670775491030016", "to": "50", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -1312670775491030016 → 50\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-242693579967937152", "to": "-1312670775491030016", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: -242693579967937152 → -1312670775491030016\ntype: svc_gate\nflow: 10\ncost: -15.7", "edge_type": "svc_gate", "flow": 10.0, "dashes": true, "color": {"color": "#7f7f7f"}}, {"from": "-6071307011258056704", "to": "136", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6071307011258056704 → 136\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "125", "to": "-2113565832596246016", "arrows": "to", "width": 4, "smooth": false, "title": "Edge: 125 → -2113565832596246016\ntype: svc_enter\nflow: 10\ncost: 0", "edge_type": "svc_enter", "flow": 10.0, "dashes": true, "color": {"color": "#8c564b"}}, {"from": "-6972045642524965888", "to": "73", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6972045642524965888 → 73\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6071307011258056704", "to": "130", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6071307011258056704 → 130\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6071307011258056704", "to": "134", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6071307011258056704 → 134\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-1312670775491030016", "to": "48", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -1312670775491030016 → 48\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-328203732588839040", "to": "156", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -328203732588839040 → 156\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-6071307011258056704", "to": "132", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -6071307011258056704 → 132\ntype: svc_exit\nflow: 0\ncost: 0", "edge_type": "svc_exit", "flow": 0.0, "dashes": true, "color": {"color": "#e377c2"}}, {"from": "-4702087699455048704", "to": "-5303467566796545024", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -4702087699455048704 → -5303467566796545024\ntype: chg_enter\nflow: 0\ncost: 0", "edge_type": "chg_enter", "flow": 0.0, "dashes": true, "color": {"color": "#1f77b4"}}, {"from": "-8500640205483802624", "to": "79", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 79\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8608577930118051840", "to": "56", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 56\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8608577930118051840", "to": "56", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 56\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8608577930118051840", "to": "58", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 58\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8608577930118051840", "to": "50", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 50\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8608577930118051840", "to": "52", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 52\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8500640205483802624", "to": "81", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 81\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-4702087699455048704", "to": "-5303467566796545024", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -4702087699455048704 → -5303467566796545024\ntype: chg_enter\nflow: 0\ncost: 0", "edge_type": "chg_enter", "flow": 0.0, "dashes": true, "color": {"color": "#1f77b4"}}, {"from": "-8500640205483802624", "to": "75", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 75\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8500640205483802624", "to": "69", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 69\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8608577930118051840", "to": "48", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 48\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8608577930118051840", "to": "62", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 62\ntype: chg_step\nflow: 0\ncost: -0.2", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-4728362194768353280", "to": "-5204973881738096640", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -4728362194768353280 → -5204973881738096640\ntype: chg_enter\nflow: 0\ncost: 0", "edge_type": "chg_enter", "flow": 0.0, "dashes": true, "color": {"color": "#1f77b4"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 6, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 40\ncost: 1", "edge_type": "chg_occ", "flow": 40.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8500640205483802624", "to": "71", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 71\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8500640205483802624", "to": "75", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 75\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8500640205483802624", "to": "77", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 77\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 6, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 60\ncost: 1", "edge_type": "chg_occ", "flow": 60.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8500640205483802624", "to": "79", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 79\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 6, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 60\ncost: 1", "edge_type": "chg_occ", "flow": 60.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8500640205483802624", "to": "73", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 73\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8500640205483802624", "to": "71", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 71\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8608577930118051840", "to": "60", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 60\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "41", "to": "-316543663216743104", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 41 → -316543663216743104\ntype: tochg\nflow: 0\ncost: 1", "edge_type": "tochg", "flow": 0.0, "dashes": true, "color": {"color": "#17becf"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8608577930118051840", "to": "48", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 48\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-316543663216743104", "to": "-5303467566796545024", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -316543663216743104 → -5303467566796545024\ntype: chg_enter\nflow: 0\ncost: 0", "edge_type": "chg_enter", "flow": 0.0, "dashes": true, "color": {"color": "#1f77b4"}}, {"from": "-4938161853202029568", "to": "-5204973881738096640", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -4938161853202029568 → -5204973881738096640\ntype: chg_enter\nflow: 0\ncost: 0", "edge_type": "chg_enter", "flow": 0.0, "dashes": true, "color": {"color": "#1f77b4"}}, {"from": "-8608577930118051840", "to": "54", "arrows": "to", "width": 6, "smooth": false, "title": "Edge: -8608577930118051840 → 54\ntype: chg_step\nflow: 160\ncost: -0.4", "edge_type": "chg_step", "flow": 160.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8608577930118051840", "to": "50", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 50\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "125", "to": "-4702087699455048704", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 125 → -4702087699455048704\ntype: tochg\nflow: 0\ncost: 1", "edge_type": "tochg", "flow": 0.0, "dashes": true, "color": {"color": "#17becf"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "104", "to": "-4938161853202029568", "arrows": "to", "width": 6, "smooth": false, "title": "Edge: 104 → -4938161853202029568\ntype: tochg\nflow: 160\ncost: 1", "edge_type": "tochg", "flow": 160.0, "dashes": true, "color": {"color": "#17becf"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8608577930118051840", "to": "62", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 62\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8500640205483802624", "to": "83", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 83\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8608577930118051840", "to": "54", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 54\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8500640205483802624", "to": "83", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 83\ntype: chg_step\nflow: 0\ncost: -0.2", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8608577930118051840", "to": "60", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 60\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8608577930118051840", "to": "52", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 52\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-8500640205483802624", "to": "83", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 83\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-4938161853202029568", "to": "-5204973881738096640", "arrows": "to", "width": 6, "smooth": false, "title": "Edge: -4938161853202029568 → -5204973881738096640\ntype: chg_enter\nflow: 160\ncost: 0", "edge_type": "chg_enter", "flow": 160.0, "dashes": true, "color": {"color": "#1f77b4"}}, {"from": "-8608577930118051840", "to": "58", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 58\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8500640205483802624", "to": "81", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 81\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8500640205483802624", "to": "73", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 73\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "20", "to": "-4728362194768353280", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 20 → -4728362194768353280\ntype: tochg\nflow: 0\ncost: 1", "edge_type": "tochg", "flow": 0.0, "dashes": true, "color": {"color": "#17becf"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8500640205483802624", "to": "69", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 69\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8500640205483802624", "to": "77", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8500640205483802624 → 77\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-8608577930118051840", "to": "62", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -8608577930118051840 → 62\ntype: chg_step\nflow: 0\ncost: -0.4", "edge_type": "chg_step", "flow": 0.0, "dashes": true, "color": {"color": "#2ca02c"}}, {"from": "-5303467566796545024", "to": "-8500640205483802624", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5303467566796545024 → -8500640205483802624\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-5204973881738096640", "to": "-8608577930118051840", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: -5204973881738096640 → -8608577930118051840\ntype: chg_occ\nflow: 0\ncost: 1", "edge_type": "chg_occ", "flow": 0.0, "dashes": true, "color": {"color": "#ff7f0e"}}, {"from": "-2065537959644669696", "to": "104", "arrows": "to", "width": 6, "smooth": false, "title": "Edge: -2065537959644669696 → 104\ntype: from_source\nflow: 180\ncost: 0", "edge_type": "from_source", "flow": 180.0, "dashes": true, "color": {"color": "#d62728"}}, {"from": "-2065537959644669696", "to": "20", "arrows": "to", "width": 5, "smooth": false, "title": "Edge: -2065537959644669696 → 20\ntype: from_source\nflow: 20\ncost: 0", "edge_type": "from_source", "flow": 20.0, "dashes": true, "color": {"color": "#d62728"}}, {"from": "147", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 147 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "148", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 148 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "149", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 149 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "150", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 150 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "151", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 151 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "152", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 152 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "153", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 153 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "154", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 154 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "155", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 155 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "156", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 156 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "157", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 157 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "158", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 158 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "159", "to": "-8724511148913573888", "arrows": "to", "width": 5, "smooth": false, "title": "Edge: 159 → -8724511148913573888\ntype: to_sink\nflow: 20\ncost: 0", "edge_type": "to_sink", "flow": 20.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "160", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 160 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "161", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 161 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "162", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 162 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "163", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 163 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "164", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 164 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "165", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 165 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "166", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 166 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "167", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 167 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "63", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 63 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "64", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 64 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "65", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 65 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "66", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 66 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "67", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 67 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "68", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 68 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "69", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 69 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "70", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 70 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "71", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 71 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "72", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 72 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "73", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 73 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "74", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 74 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "75", "to": "-8724511148913573888", "arrows": "to", "width": 6, "smooth": false, "title": "Edge: 75 → -8724511148913573888\ntype: to_sink\nflow: 180\ncost: 0", "edge_type": "to_sink", "flow": 180.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "76", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 76 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "77", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 77 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "78", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 78 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "79", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 79 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "80", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 80 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "81", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 81 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "82", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 82 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}, {"from": "83", "to": "-8724511148913573888", "arrows": "to", "width": 1, "smooth": false, "title": "Edge: 83 → -8724511148913573888\ntype: to_sink\nflow: 0\ncost: 0", "edge_type": "to_sink", "flow": 0.0, "dashes": true, "color": {"color": "#bcbd22"}}];
    const FOCUS = { xGap: 260, yGap: 110, maxCols: 6, centerSize: 11 };
    const PATH  = { xGap: 260,  yGap: 110,  maxCols: 7, centerSize: 11 };

    const nodes = new vis.DataSet(ALL_NODES);
    let edges = new vis.DataSet(ALL_EDGES);

    const options = {
      physics: false,
      interaction: { hover: true, zoomView: true, dragView: true },
      nodes: { shape: 'dot', font: { size: 1 } },
      edges: { smooth: false, arrows: 'to' }
    };
    const network = new vis.Network(document.getElementById('network'), { nodes, edges }, options);

    // 保存原始坐标用于恢复
    const ORIG_POS = {};
    nodes.get().forEach(n => { ORIG_POS[n.id] = { x: n.x, y: n.y, size: n.size ?? 8 }; });

    // 状态
    let focusedNodeId = null;
    let tracedCenterId = null;

    // 标签切换
    document.getElementById('toggleLabels').addEventListener('change', e => {
      const show = e.target.checked;
      nodes.update(nodes.get().map(n => ({ id: n.id, label: show ? String(n.id) : ' ' })));
    });

    function getPathDir() {
      const el = document.querySelector('input[name="pathdir"]:checked');
      return el ? el.value : 'both';
    }

    // 点击优先级：trace path > focus
    network.on('click', params => {
      if (!(params.nodes && params.nodes.length > 0)) return;
      const nid = String(params.nodes[0]);
      if (document.getElementById('tracePath').checked) {
        tracedCenterId = nid; focusedNodeId = null; applyFilters(); return;
      }
      if (document.getElementById('focusOnClick').checked) {
        focusedNodeId = nid; tracedCenterId = null; applyFilters();
      }
    });
    document.getElementById('clearFocus').addEventListener('click', () => { focusedNodeId = null; applyFilters(); });
    document.getElementById('clearPath').addEventListener('click', () => { tracedCenterId = null; applyFilters(); });
    document.querySelectorAll('input[name="pathdir"]').forEach(r => r.addEventListener('change', () => {
      if (tracedCenterId !== null && document.getElementById('tracePath').checked) applyFilters();
    }));

    function restoreOriginalLayout() {
      const upd = nodes.get().map(n => ({
        id: n.id, x: ORIG_POS[n.id]?.x, y: ORIG_POS[n.id]?.y,
        size: ORIG_POS[n.id]?.size ?? n.size, fixed: true, hidden: n.hidden
      }));
      nodes.update(upd);
    }

    // 网格摆放
    function gridPlace(list, baseX, baseY, gapX, gapY, maxCols) {
      const n = list.length; if (n === 0) return {};
      const cols = Math.min(maxCols, Math.max(1, Math.ceil(Math.sqrt(n))));
      const rows = Math.ceil(n / cols);
      const pos = {};
      for (let i = 0; i < n; i++) {
        const r = Math.floor(i / cols), c = i % cols;
        const x = baseX + (c - (cols - 1) / 2) * (gapX / 2);
        const y = baseY + (r - (rows - 1) / 2) * gapY;
        pos[list[i]] = { x, y };
      }
      return pos;
    }

    // ======= 有向通路（flow>0） + 动态重排 =======
    function showDirectedPathRelayout(centerId, dir) {
      // 1) 仅 flow>0 的有向邻接
      const outAdj = new Map(), inAdj = new Map();
      const posEdges = [];
      for (const e of ALL_EDGES) {
        if (!(e.flow > 0)) continue;
        posEdges.push(e);
        if (!outAdj.has(e.from)) outAdj.set(e.from, []);
        if (!inAdj.has(e.to))    inAdj.set(e.to, []);
        outAdj.get(e.from).push(e.to);
        inAdj.get(e.to).push(e.from);
      }

      // 2) BFS 距离
      function bfs(start, adjMap) {
        const dist = new Map([[start, 0]]), q = [start];
        while (q.length) {
          const u = q.shift();
          for (const v of (adjMap.get(u) || [])) {
            if (!dist.has(v)) { dist.set(v, dist.get(u) + 1); q.push(v); }
          }
        }
        return dist;
      }
      const distF = (dir === 'forward' || dir === 'both') ? bfs(centerId, outAdj) : new Map([[centerId,0]]);
      const distB = (dir === 'backward' || dir === 'both') ? bfs(centerId, inAdj ) : new Map([[centerId,0]]);

      // 3) 选节点并分层（左负右正）
      const keep = new Set([centerId]);
      for (const k of distF.keys()) keep.add(k);
      for (const k of distB.keys()) keep.add(k);

      const layer = new Map([[centerId, 0]]);
      keep.forEach(nid => {
        if (nid === centerId) return;
        const inF = distF.has(nid), inB = distB.has(nid);
        if (dir === 'forward' && inF) layer.set(nid, +distF.get(nid));
        else if (dir === 'backward' && inB) layer.set(nid, -distB.get(nid));
        else if (dir === 'both') {
          if (inF && !inB) layer.set(nid, +distF.get(nid));
          else if (!inF && inB) layer.set(nid, -distB.get(nid));
          else if (inF && inB) layer.set(nid, (distF.get(nid) <= distB.get(nid)) ? +distF.get(nid) : -distB.get(nid));
        }
      });

      // 4) 布局与显示
      const byLayer = new Map();
      for (const nid of keep) {
        const lv = layer.get(nid); if (lv === undefined) continue;
        if (!byLayer.has(lv)) byLayer.set(lv, []);
        byLayer.get(lv).push(nid);
      }
      nodes.update(nodes.get().map(n => ({ id: n.id, hidden: !keep.has(n.id) })));

      const updates = [{ id: centerId, x: 0, y: 0, size: PATH.centerSize, fixed: true }];
      for (const [lv, arr] of Array.from(byLayer.entries()).sort((a,b)=>a[0]-b[0])) {
        if (lv === 0) continue;
        const baseX = lv * PATH.xGap, baseY = 0;
        const pos = gridPlace(arr, baseX, baseY, PATH.xGap, PATH.yGap, PATH.maxCols);
        for (const [id,p] of Object.entries(pos)) updates.push({ id, x:p.x, y:p.y, fixed:true });
      }
      nodes.update(updates);

      // 5) 仅显示通路上的 flow>0 边
      const keepEdges = [];
      const seen = new Set();
      for (const e of posEdges) {
        if (keep.has(e.from) && keep.has(e.to)) {
          const key = e.from + "->" + e.to + "|" + e.edge_type + "|" + (e.cost ?? "");
          if (!seen.has(key)) { seen.add(key); keepEdges.push({ ...e, hidden: false }); }
        }
      }
      edges.clear(); edges.add(keepEdges);

      // 视图对齐
      network.fit({ nodes: Array.from(keep), animation: { duration: 250, easingFunction: "easeInOutQuad" } });
    }

    // ======= 聚焦动态重排 =======
    function relayoutFocus(centerId) {
      const inSet  = new Set();
      const outSet = new Set();
      ALL_EDGES.forEach(e => { if (e.to === centerId && !inSet.has(e.from)) inSet.add(e.from);
                               if (e.from === centerId && !outSet.has(e.to)) outSet.add(e.to); });
      const biSet = new Set();
      for (const n of Array.from(inSet)) if (outSet.has(n)) { biSet.add(n); inSet.delete(n); outSet.delete(n); }

      const inList  = Array.from(inSet);
      const outList = Array.from(outSet);
      const biList  = Array.from(biSet);

      const keep = new Set([centerId, ...inList, ...outList, ...biList]);
      nodes.update(nodes.get().map(n => ({ id: n.id, hidden: !keep.has(n.id) })));

      const updates = [{ id: centerId, x: 0, y: 0, size: FOCUS.centerSize, fixed: true }];
      const posIn  = gridPlace(inList,  -FOCUS.xGap, 0, FOCUS.xGap, FOCUS.yGap, FOCUS.maxCols);
      const posOut = gridPlace(outList, +FOCUS.xGap, 0, FOCUS.xGap, FOCUS.yGap, FOCUS.maxCols);
      const posBi  = gridPlace(biList,  0, FOCUS.yGap*1.4, FOCUS.xGap, FOCUS.yGap, FOCUS.maxCols);
      for (const [id,p] of Object.entries(posIn))  updates.push({ id, x:p.x, y:p.y, fixed:true });
      for (const [id,p] of Object.entries(posOut)) updates.push({ id, x:p.x, y:p.y, fixed:true });
      for (const [id,p] of Object.entries(posBi))  updates.push({ id, x:p.x, y:p.y, fixed:true });
      nodes.update(updates);

      const focusEdges = ALL_EDGES.filter(e => e.from === centerId || e.to === centerId).map(e => ({ ...e, hidden: false }));
      edges.clear(); edges.add(focusEdges);
      network.fit({ nodes: Array.from(keep), animation: { duration: 250, easingFunction: "easeInOutQuad" } });
    }

    // 统一过滤
    function applyFilters() {
      // 1) 通路模式（有向 + 动态重排）
      if (tracedCenterId !== null && document.getElementById('tracePath').checked) {
        restoreOriginalLayout();  // 先恢复坐标，再重排通路
        showDirectedPathRelayout(tracedCenterId, getPathDir());
        return;
      }
      // 2) 聚焦模式
      if (focusedNodeId !== null && document.getElementById('focusOnClick').checked) {
        relayoutFocus(focusedNodeId);
        return;
      }

      // 3) 常规筛选
      const allowedEdgeTypes = new Set(Array.from(document.querySelectorAll('.etype')).filter(b => b.checked).map(b => b.value));
      const allowedVCats    = new Set(Array.from(document.querySelectorAll('.vcat')).filter(b => b.checked).map(b => b.value));
      const flowOnly        = document.getElementById('flowOnly').checked;
      const showVirtual     = document.getElementById('showVirtual').checked;

      const hiddenInit = new Set();
      nodes.get().forEach(n => {
        if (n.is_virtual) {
          const ok = showVirtual && allowedVCats.has(n.vcat);
          if (!ok) hiddenInit.add(n.id);
        }
      });

      const candidateEdges = ALL_EDGES.filter(e =>
        allowedEdgeTypes.has(e.edge_type) && (!flowOnly || e.flow > 0)
      );

      const activeNodeIds = new Set();
      candidateEdges.forEach(e => {
        if (!hiddenInit.has(e.from) && !hiddenInit.has(e.to)) {
          activeNodeIds.add(e.from); activeNodeIds.add(e.to);
        }
      });

      const finalHidden = new Set(hiddenInit);
      if (flowOnly) {
        nodes.get().forEach(n => {
          if (!finalHidden.has(n.id) && !activeNodeIds.has(n.id)) finalHidden.add(n.id);
        });
      }

      restoreOriginalLayout();
      nodes.update(nodes.get().map(n => ({ id: n.id, hidden: finalHidden.has(n.id) })));

      const filtered = ALL_EDGES.map(e => ({
        ...e,
        hidden: !(
          allowedEdgeTypes.has(e.edge_type) &&
          (!flowOnly || e.flow > 0) &&
          !finalHidden.has(e.from) &&
          !finalHidden.has(e.to)
        )
      }));
      edges.clear(); edges.add(filtered);
    }

    // 常规控件
    document.getElementById('flowOnly').addEventListener('change', applyFilters);
    document.getElementById('showVirtual').addEventListener('change', applyFilters);
    document.querySelectorAll('.etype').forEach(b => b.addEventListener('change', applyFilters));
    document.querySelectorAll('.vcat').forEach(b => b.addEventListener('change', applyFilters));
  </script>
</body>
</html>
