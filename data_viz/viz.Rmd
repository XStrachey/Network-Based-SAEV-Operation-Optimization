---
title: "Viz"
author: "Zhewei Xie"
date: "2025-09-27"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r}
# 依赖：
# install.packages(c("readr","dplyr","lubridate","tidyr"))

library(dplyr)
library(readr)
library(ggplot2)

od <- "../data/od_matrix.csv"  # 需包含列: t,i,j,demand

od_matrix <- read_csv(od, show_col_types = FALSE)

# 若只想画某一方向，可先 filter(i=="00000308", j=="00000317")
counts_local <- od_matrix %>%
  mutate(t = as.integer(t),
         demand = as.numeric(demand)) %>%
  group_by(t) %>%
  summarise(demand = sum(demand, na.rm = TRUE), .groups = "drop") %>%
  arrange(t)

ggplot(counts_local, aes(x = t, y = demand)) +
  geom_line() +
  scale_x_continuous(breaks = seq(1, 96, by = 4)) +
  labs(
    title = "Trips per 15-minute bin (index 1..96)",
    x = "Bin index (1..96)", y = "Trips"
  ) +
  theme_minimal()

```

